---
output: github_document
---

<!-- Run `devtools::build_readme()` after editing.  -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = '#>',
  fig.path = 'man/figures/README-',
  fig.height = 4,
  fig.width = 8,
  dev='ragg_png'
)
```

# rbiom <img src="man/figures/logo.png" align="right" width="174" height="200" alt="rbiom logo" />

<!-- badges: start -->
[![cran](https://img.shields.io/cran/v/rbiom?logo=r&label=CRAN)](https://CRAN.R-project.org/package=rbiom)
[![conda](https://img.shields.io/conda/v/conda-forge/r-rbiom?logo=anaconda&label=conda)](https://anaconda.org/conda-forge/r-rbiom)
[![downloads](https://cranlogs.r-pkg.org/badges/grand-total/rbiom)](https://cranlogs.r-pkg.org/)
[![covr](https://img.shields.io/codecov/c/gh/cmmr/rbiom?logo=codecov)](https://app.codecov.io/gh/cmmr/rbiom)
<!-- badges: end -->


`rbiom` is designed for microbiome researchers, providing visualizations and 
statistical analyses from Biological Observation Matrix (BIOM) files.


## Installation

The latest stable version can be installed from CRAN.

``` r
install.packages('rbiom')
```

The development version is available on GitHub.

``` r
install.packages('pak')
pak::pak('cmmr/rbiom')
```


## Usage

#### Import and rarefy abundance counts.
```{r usage}
library(rbiom)

infile <- system.file(package = 'rbiom', 'extdata', 'hmp50.bz2')
biom   <- rarefy(infile)
```


#### Explore associations with metadata.
```{r bdiv}
bdiv_ord_plot(biom, stat.by = 'Body Site', facet.by = 'Sex')
adiv_boxplot(biom, x = 'Sex', adiv = c('otu', 'shan'), stat.by = 'Body Site')
subset(biom, `Body Site` == 'Buccal mucosa') %>% 
  taxa_corrplot('Age', taxa = 2, layers = 'ptc', fit = 'lm', test = 'emtrends')
```


#### Summarize counts by taxonomic rank.
```{r taxa}
taxa_heatmap(biom, taxa = 10, tracks = c('body', 'age'))
taxa_stacked(biom, rank = 'Phylum')
taxa_table(biom, 'Phylum')
```



## Documentation

The online manual for `rbiom` is available at https://cmmr.github.io/rbiom/. It includes a getting started guide, articles that explore specific use cases, and reference pages for each function.


## Community guidelines

### Support

Bug reports, feature requests, and general questions can be submitted at https://github.com/cmmr/rbiom/issues.

### Contributing

Pull requests are welcome. Please ensure contributed code is covered by tests and documentation (add additional tests and documentation as needed) and that it passes all automated tests.



## Automated tests

The following commands will check if `rbiom` passes the bundled testing suite.

```r
install.packages('testthat')
testthat::test_check('rbiom')
```


