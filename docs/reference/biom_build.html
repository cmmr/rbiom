<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Create a BIOM object."><title>Create a BIOM object. — biom_build • rbiom</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a BIOM object. — biom_build"><meta property="og:description" content="Create a BIOM object."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rbiom</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0.9003</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cmmr/rbiom/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create a BIOM object.</h1>
      <small class="dont-index">Source: <a href="https://github.com/cmmr/rbiom/blob/HEAD/R/biom_build.r" class="external-link"><code>R/biom_build.r</code></a></small>
      <div class="d-none name"><code>biom_build.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a BIOM object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">biom_build</span><span class="op">(</span></span>
<span>  <span class="va">counts</span>,</span>
<span>  metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  taxonomy <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tree <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sequences <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  comment <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>counts</dt>
<dd><p>The count data as a numeric matrix, where column names are
the sample names and row names are the OTU names. A BIOM object or
a filename/URL compatible with <code><a href="read_biom.html">read_biom()</a></code> is also acceptable.</p></dd>


<dt>metadata</dt>
<dd><p>A data.frame with sample names as the row names and
metadata names as the column names. Or a filename/URL with comma- or
tab-separated data.</p></dd>


<dt>taxonomy</dt>
<dd><p>A character matrix with OTU names as the row names. Or a
filename/URL with comma- or tab-separated data.</p></dd>


<dt>tree</dt>
<dd><p>A <code>phylo</code> object with tip labels matching the OTU names.
(E.g. from <code><a href="read_tree.html">read_tree()</a></code>). Or a filename/URL with newick formatted
data.</p></dd>


<dt>sequences</dt>
<dd><p>A named character vector of DNA sequences. Or a
filename/URL with fasta format data.
(Currently not used by <code>rbiom</code>.)</p></dd>


<dt>id, comment</dt>
<dd><p>A character vector of length one with text of the user's
choosing.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>BIOM</code> class object containing the parsed data. This object
can be treated as a list with the following named elements:</p><ul><li><p><code>$counts</code> - 
A numeric <code>slam</code> sparse matrix of observation counts. Taxa
(OTUs) as rows and samples as columns.</p></li>
<li><p><code>$metadata</code> - 
A data frame containing any embedded metadata. Row names are
sample IDs.</p></li>
<li><p><code>$taxonomy</code> - 
Character matrix of taxonomic names, if given. Row names are taxa
(OTU) IDs. Column rows are named Kingdom, Phylum, Class, Order,
Family, Genus, Species, and Strain, or TaxLvl.1, TaxLvl.2, ... ,
TaxLvl.N when more than 8 levels of taxonomy are encoded in the
biom file.</p></li>
<li><p><code>$phylogeny</code> - 
An object of class <code>phylo</code> defining the phylogenetic
relationships between the taxa. Although the official
specification for BIOM only includes phylogenetic trees in BIOM
version 2.1, if a BIOM version 1.0 file includes a
<code>phylogeny</code> entry with newick data, then it will be loaded
here as well. The <span class="pkg">ape</span> package has additional functions for
working with <code>phylo</code> objects.</p></li>
<li><p><code>$sequences</code> - 
A named character vector, where the names are taxonomic
identifiers and the values are the sequences they represent.
These values are not part of the official BIOM specification, but
will be read and written when defined.</p></li>
<li><p><code>$info</code> - 
A list of other attributes defined in the BIOM file, such as
<code>id</code>, <code>type</code>, <code>format</code>, <code>format_url</code>,
<code>generated_by</code>, <code>date</code>, <code>matrix_type</code>,
<code>matrix_element_type</code>, <code>Comment</code>, and <code>shape</code>.</p></li>
</ul><p><code>metadata</code>, <code>taxonomy</code>, and <code>phylogeny</code> are optional
components of the BIOM file specification and therefore will be empty
in the returned object when they are not provided by the BIOM file.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cmmr.github.io/rbiom/index.html">rbiom</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="va">biom</span> <span class="op">&lt;-</span> <span class="fu"><a href="sample_select.html">sample_select</a></span><span class="op">(</span><span class="va">hmp50</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># Save components to separate files.</span></span></span>
<span class="r-in"><span>    <span class="va">ct</span>  <span class="op">&lt;-</span> <span class="fu"><a href="write_counts.html">write_counts</a></span><span class="op">(</span><span class="va">biom</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">md</span>  <span class="op">&lt;-</span> <span class="fu"><a href="write_metadata.html">write_metadata</a></span><span class="op">(</span><span class="va">biom</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">tax</span> <span class="op">&lt;-</span> <span class="fu"><a href="write_taxonomy.html">write_taxonomy</a></span><span class="op">(</span><span class="va">biom</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">tre</span> <span class="op">&lt;-</span> <span class="fu"><a href="write_tree.html">write_tree</a></span><span class="op">(</span><span class="va">biom</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">fas</span> <span class="op">&lt;-</span> <span class="fu"><a href="write_fasta.html">write_fasta</a></span><span class="op">(</span><span class="va">biom</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># Peek at the file structures.</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">ct</span>, n <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span>,  <span class="st">''</span>, sep<span class="op">=</span><span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #OTU ID	HMP01	HMP02	HMP03	HMP04	HMP05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> UncO4101	1	5	6	18	5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">md</span>, n <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span>,  <span class="st">''</span>, sep<span class="op">=</span><span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SampleID	Age	BMI	Body Site	Sex </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HMP01	22	20	Buccal mucosa	Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">tax</span>, n <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span>, <span class="st">''</span>, sep<span class="op">=</span><span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> UncO4101	Bacteria	Firmicutes	Clostridia	Clostridiales	Lachnospiraceae	Lachnoanaerobaculum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unc96922	Bacteria	Bacteroidetes	Flavobacteriia	Flavobacteriales	Flavobacteriaceae	Capnocytophaga</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readChar.html" class="external-link">readChar</a></span><span class="op">(</span><span class="va">tre</span>, nchars <span class="op">=</span> <span class="fl">50L</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ((((((((((Unc92490:0.05748,Unc02pjp:0.01233):0.007 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readChar.html" class="external-link">readChar</a></span><span class="op">(</span><span class="va">fas</span>, nchars <span class="op">=</span> <span class="fl">50L</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt;UncO4101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TGGGGAATATTGGACAATGGGGGAAACCCTGATCCAGCG </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># Re-assemble the BIOM object.</span></span></span>
<span class="r-in"><span>    <span class="va">biom</span> <span class="op">&lt;-</span> <span class="fu">biom_build</span><span class="op">(</span><span class="va">ct</span>, <span class="va">md</span>, <span class="va">tax</span>, <span class="va">tre</span>, id <span class="op">=</span> <span class="st">"New BIOM"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="print.html">print</a></span><span class="op">(</span><span class="va">biom</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> New BIOM (2023-10-03)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       5 Samples:  (HMP01, HMP02, HMP03, HMP04, and HMP05)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     132 Taxa:     (UncO4101, Unc96922, Unc02k4w, Unc1721...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       6 Ranks:    (Kingdom, Phylum, Class, Order, Family...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       4 Metadata: (Age, BMI, Body Site, and Sex)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Tree:     Present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># Remove temporary files.</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ct</span>, <span class="va">md</span>, <span class="va">tax</span>, <span class="va">fas</span>, <span class="va">tre</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Daniel P. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

