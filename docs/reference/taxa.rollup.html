<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate a matrix of samples by taxa, at the specified taxonomic rank. — taxa.rollup • rbiom</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generate a matrix of samples by taxa, at the specified taxonomic rank. — taxa.rollup" />
<meta property="og:description" content="Generate a matrix of samples by taxa, at the specified taxonomic rank." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rbiom</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/benchmark.html">Benchmark</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/cmmr/rbiom/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a matrix of samples by taxa, at the specified taxonomic rank.</h1>
    <small class="dont-index">Source: <a href='https://github.com/cmmr/rbiom/blob/master/R/taxa.rollup.r'><code>R/taxa.rollup.r</code></a></small>
    <div class="hidden name"><code>taxa.rollup.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generate a matrix of samples by taxa, at the specified taxonomic rank.</p>
    </div>

    <pre class="usage"><span class='fu'>taxa.rollup</span>(
  <span class='no'>biom</span>,
  <span class='kw'>rank</span> <span class='kw'>=</span> <span class='st'>"OTU"</span>,
  <span class='kw'>map</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>lineage</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>progressbar</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>biom</th>
      <td><p>A <code>matrix</code>, <code>simple_triplet_matrix</code>, or <code>BIOM</code> 
object, as returned from <a href='read.biom.html'>read.biom</a>. For matrices, the rows and 
columns are assumed to be the taxa and samples, respectively.</p></td>
    </tr>
    <tr>
      <th>rank</th>
      <td><p>The taxonomic rank. E.g. <b>&#8220;OTU&#8221;</b>, 
<b>&#8220;Phylum&#8221;</b>, etc. May also be given numerically: 0 for
OTU, 1 for the highest level (i.e. Kingdom), and extending to the number
of taxonomic ranks encoded in the original biom file. See example below
to fetch the names of all available ranks.</p></td>
    </tr>
    <tr>
      <th>map</th>
      <td><p>A character matrix defining the value that each taxa IDs is
assigned for each taxonomic rank. If <code>map=NULL</code> and <code>biom</code> is a
<code>BIOM</code> class object, the map will be automatically loaded from 
<code>biom$taxonomy</code>. <code>map</code> must not be <code>null</code> when <code>biom</code>
is a <code>matrix</code> or <code>simple_triplet_matrix</code>. See the example below
for an example of <code>map</code>'s structure.</p></td>
    </tr>
    <tr>
      <th>lineage</th>
      <td><p>Include all ranks in the name of the taxa. For instance,
setting to <code>TRUE</code> will produce 
<code>Bacteria; Actinobacteria; Coriobacteriia; Coriobacteriales</code>. 
Whereas setting to <code>FALSE</code> (the default) will return simply
<code>Coriobacteriales</code>. You want to set this to TRUE if you have
genus names (such as <em>Incertae_Sedis</em>) that map to multiple higher
level ranks.</p></td>
    </tr>
    <tr>
      <th>sparse</th>
      <td><p>If true, returns a sparse matrix as described by 
<code><a href='https://rdrr.io/pkg/slam/man/matrix.html'>slam::simple_triplet_matrix</a></code>, otherwise returns a normal R
matrix object. Sparse matrices will likely be considerably more
memory efficient in this scenario.</p></td>
    </tr>
    <tr>
      <th>progressbar</th>
      <td><p>An object of class <code>Progress</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A numeric matrix with samples as column names, and taxonomic
    identifiers as row names.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>    <span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>rbiom</span>)

    <span class='no'>infile</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"extdata"</span>, <span class='st'>"hmp50.biom"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"rbiom"</span>)
    <span class='no'>biom</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='read.biom.html'>read.biom</a></span>(<span class='no'>infile</span>)

    <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>biom</span>$<span class='no'>taxonomy</span>)</div><div class='output co'>#&gt; [1] "Kingdom" "Phylum"  "Class"   "Order"   "Family"  "Genus"  </div><div class='input'>
    <span class='no'>phyla</span> <span class='kw'>&lt;-</span> <span class='fu'>taxa.rollup</span>(<span class='no'>biom</span>, <span class='st'>'Phylum'</span>)
    <span class='no'>phyla</span>[<span class='fl'>1</span>:<span class='fl'>4</span>,<span class='fl'>1</span>:<span class='fl'>6</span>]</div><div class='output co'>#&gt;                HMP01 HMP02 HMP03 HMP04 HMP05 HMP06
#&gt; Acidobacteria      0     0     0     0     0     0
#&gt; Actinobacteria    46    41    11    33    65  1573
#&gt; Bacteroidetes    798   181   102   141    97    32
#&gt; BD1_5              1     0     0     0     1     0</div><div class='input'>
    <span class='co'># Custom matrices should be formatted like so:</span>
    <span class='no'>counts</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span>(<span class='no'>biom</span>$<span class='no'>counts</span>)
    <span class='no'>map</span>    <span class='kw'>&lt;-</span> <span class='no'>biom</span>$<span class='no'>taxonomy</span>

    <span class='no'>counts</span>[<span class='fl'>1</span>:<span class='fl'>3</span>,<span class='fl'>1</span>:<span class='fl'>6</span>]</div><div class='output co'>#&gt;          HMP01 HMP02 HMP03 HMP04 HMP05 HMP06
#&gt; AciSp313     0     0     0     0     0     0
#&gt; AcnLingn     0     0     0     1     0     0
#&gt; AcnOriho     0     0     0     0     0     0</div><div class='input'>    <span class='no'>map</span>[<span class='fl'>1</span>:<span class='fl'>3</span>,<span class='fl'>1</span>:<span class='fl'>4</span>]</div><div class='output co'>#&gt;          Kingdom    Phylum           Class                 Order            
#&gt; AciSp313 "Bacteria" "Proteobacteria" "Gammaproteobacteria" "Pseudomonadales"
#&gt; AcnLingn "Bacteria" "Actinobacteria" "Actinobacteria"      "Actinomycetales"
#&gt; AcnOriho "Bacteria" "Actinobacteria" "Actinobacteria"      "Actinomycetales"</div><div class='input'>
    <span class='no'>phyla</span> <span class='kw'>&lt;-</span> <span class='fu'>taxa.rollup</span>(<span class='no'>counts</span>, <span class='st'>'Phylum'</span>, <span class='kw'>map</span><span class='kw'>=</span><span class='no'>map</span>)
    <span class='no'>phyla</span>[<span class='fl'>1</span>:<span class='fl'>3</span>,<span class='fl'>1</span>:<span class='fl'>6</span>]</div><div class='output co'>#&gt;                HMP01 HMP02 HMP03 HMP04 HMP05 HMP06
#&gt; Acidobacteria      0     0     0     0     0     0
#&gt; Actinobacteria    46    41    11    33    65  1573
#&gt; Bacteroidetes    798   181   102   141    97    32</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Daniel P. Smith.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


